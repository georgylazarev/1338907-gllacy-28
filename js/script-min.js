var popupButton=document.querySelector(".popup-button"),popupWrapper=document.querySelector(".popup-wrapper"),popupBlock=document.querySelector(".popup"),popupClose=document.querySelector(".popup-close"),popupForm=document.querySelector(".popup-form"),userName=document.querySelector(".user-name"),userEmail=document.querySelector(".user-email"),userMessage=document.querySelector(".user-message"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("userName"),storageEmail=localStorage.getItem("userEmain")}catch(a){isStorageSupport=!1}popupButton.addEventListener("click",function(a){a.preventDefault(),popupWrapper.classList.add("popup-show"),userName.focus(),storageName&&(userName.value=storageName,userEmail.focus()),storageEmail&&(userEmail.value=storageEmail,userMessage.focus())}),popupClose.addEventListener("click",function(a){a.preventDefault(),popupWrapper.classList.remove("popup-show"),popupBlock.classList.remove("popup-error")}),popupForm.addEventListener("submit",function(a){userName.value&&userEmail.value&&userMessage.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userEmain",userEmail.value)):(a.preventDefault(),popupBlock.classList.remove("popup-error"),popupBlock.offsetWidth=popupBlock.offsetWidth,popupBlock.classList.add("popup-error"))}),window.addEventListener("keydown",function(a){27===a.keyCode&&popupWrapper.classList.contains("popup-show")&&(a.preventDefault(),popupWrapper.classList.remove("popup-show"),popupBlock.classList.remove("popup-error"))});
